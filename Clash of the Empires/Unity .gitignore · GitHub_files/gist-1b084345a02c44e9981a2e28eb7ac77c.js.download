define("github-rollup-gist-bootstrap",["invariant","selector-observer","github/query-selector","github/google-analytics","github/throttled-input","github/form","github/fetch","github/code-editor","delegated-events","github/onfocus","github/remote-form","github/navigation","github/sliding-promise-queue"],function(e,t,r,n,s,a,i,o,u,c,l,d,f){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,f=f&&f.hasOwnProperty("default")?f.default:f;var v,g=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(s,a){try{var i=t[s](a),o=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}},p=(v=g(regeneratorRuntime.mark(function e(t){var r,s,a,i,o,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dataTransfer){e.next=3;break}return e.abrupt("return");case 3:s=!0,a=!1,i=void 0,e.prev=6,o=r.files[Symbol.iterator]();case 8:if(s=(u=o.next()).done){e.next=23;break}return c=u.value,n.trackEvent({category:"Interaction",action:"File Drop",label:c.type}),e.prev=11,e.next=14,b(c);case 14:l=e.sent,t.target.dispatchEvent(new CustomEvent("gist:filedrop",{bubbles:!0,detail:l})),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(11);case 20:s=!0,e.next=8;break;case 23:e.next=29;break;case 25:e.prev=25,e.t1=e.catch(6),a=!0,i=e.t1;case 29:e.prev=29,e.prev=30,!s&&o.return&&o.return();case 32:if(e.prev=32,!a){e.next=35;break}throw i;case 35:return e.finish(32);case 36:return e.finish(29);case 37:case"end":return e.stop()}},e,this,[[6,25,29,37],[11,18],[30,,32,36]])})),function(e){return v.apply(this,arguments)});function m(e){r.query(document,".js-gist-dropzone").classList.remove("d-none"),e.stopPropagation(),e.preventDefault()}function h(e){var t=e.target;t instanceof Element&&t.classList.contains("js-gist-dropzone")&&t.classList.add("d-none")}function y(e){p(e),r.query(document,".js-gist-dropzone").classList.add("d-none"),e.stopPropagation(),e.preventDefault()}function b(t){return new Promise(function(r,n){var s=new FileReader;s.onload=function(){e("string"==typeof s.result,"app/assets/modules/github/gist/drag-drop.js:71");var a=s.result;a&&!/\0/.test(a)?r({file:t,data:a}):n(new Error("invalid file"))},s.readAsText(t)})}t.observe(".js-gist-dropzone",{add:function(){var t=document.body;e(t,"app/assets/modules/github/gist/drag-drop.js:50"),t.addEventListener("dragenter",m),t.addEventListener("dragleave",h),t.addEventListener("dragover",m),t.addEventListener("drop",y)},remove:function(){var t=document.body;e(t,"app/assets/modules/github/gist/drag-drop.js:58"),t.removeEventListener("dragenter",m),t.removeEventListener("dragleave",h),t.removeEventListener("dragover",m),t.removeEventListener("drop",y)}});var j,L,q=function(){var e=g(regeneratorRuntime.mark(function e(t){var r,n,s,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAttribute("data-language-detection-url")){e.next=3;break}return e.abrupt("return");case 3:return n=new URL(r,window.location.origin),(s=new URLSearchParams(n.search.slice(1))).append("filename",t.value),n.search=s.toString(),e.next=9,i.fetchJSON(n);case 9:return a=e.sent,e.next=12,E(t);case 12:e.sent.setMode(a.language);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();function k(t){var n=r.query(t,".js-gist-files"),s=document.getElementById("js-gist-file-template");e(s,"app/assets/modules/github/gist/gist-edit.js:18");var a=document.createElement("div");a.innerHTML=s.textContent;var i=!0,o=!1,u=void 0;try{for(var c,l=a.querySelectorAll("[id]")[Symbol.iterator]();!(i=(c=l.next()).done);i=!0){c.value.removeAttribute("id")}}catch(e){o=!0,u=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw u}}var d=a.querySelector(".js-code-textarea");null!=d&&d.setAttribute("id","blob_contents_"+Date.now());var f=!0,v=!1,g=void 0;try{for(var p,m=a.children[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var h=p.value;n.append(h)}}catch(e){v=!0,g=e}finally{try{!f&&m.return&&m.return()}finally{if(v)throw g}}var y=n.lastElementChild;return e(y,"app/assets/modules/github/gist/gist-edit.js:37"),y}function w(e){var t=!0,n=!1,s=void 0;try{for(var a,i=e.querySelectorAll(".js-gist-file")[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value,u=r.query(o,".js-gist-filename",HTMLInputElement),c=r.query(o,".js-blob-contents",HTMLTextAreaElement);if(!u.value&&!c.value)return o}}catch(e){n=!0,s=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw s}}return k(e)}function E(e){return o.getAsyncCodeEditor(r.closest(e,".js-code-editor"))}function x(e){return r.querySelectorAll(e,".js-code-textarea",HTMLTextAreaElement).some(function(e){return e.value.trim().length>0})}function T(){var t=!0,n=!1,s=void 0;try{for(var a,i=r.querySelectorAll(document,".js-gist-create",HTMLButtonElement)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value,u=o.form;e(u,"app/assets/modules/github/gist/gist-edit.js:66"),o.disabled=!x(u)}}catch(e){n=!0,s=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw s}}}function S(e){var t=e.querySelectorAll(".js-remove-gist-file"),r=!0,n=!1,s=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){a.value.classList.toggle("d-none",t.length<2)}}catch(e){n=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw s}}}u.on("change",".js-code-textarea",function(){T()}),c.onFocus(".js-gist-filename",(j=g(regeneratorRuntime.mark(function t(n){var a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e((a=n)instanceof HTMLInputElement,"app/assets/modules/github/gist/gist-edit.js:98"),i=r.closest(n,".js-code-editor"),t.next=5,E(i);case 5:s.addThrottledInputEventListener(a,q),n.addEventListener("blur",function(){return s.removeThrottledInputEventListener(a,q)},{once:!0});case 7:case"end":return t.stop()}},t,void 0)})),function(e){return j.apply(this,arguments)})),u.on("click",".js-add-gist-file",function(e){e.preventDefault(),k(r.closest(e.currentTarget,".js-blob-form")).scrollIntoView()}),u.on("gist:filedrop",".js-blob-form",(L=g(regeneratorRuntime.mark(function t(n){var s,a,i,o,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e(n instanceof CustomEvent,"app/assets/modules/github/gist/gist-edit.js:112"),s=n.detail,a=s.file,i=s.data,o=w(n.currentTarget),(u=r.query(o,".js-gist-filename",HTMLInputElement)).value=a.name,q(u),t.next=8,E(u);case 8:t.sent.setCode(i),o.scrollIntoView();case 11:case"end":return t.stop()}},t,this)})),function(e){return L.apply(this,arguments)})),u.on("click",".js-remove-gist-file",function(e){e.preventDefault();var t=r.closest(e.currentTarget,".js-gist-file"),n=!0,s=!1,a=void 0;try{for(var i,o=r.querySelectorAll(t,".js-gist-deleted input",HTMLInputElement)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){i.value.disabled=!1}}catch(e){s=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw a}}r.query(t,".js-code-editor").remove()}),t.observe(".js-gist-create",T),t.observe(".js-remove-gist-file",function(e){var t=r.closest(e,".js-gist-files");return{add:function(){S(t)},remove:function(){S(t)}}}),u.on("details-menu-selected",".js-gist-share-menu",function(t){var n=t.currentTarget,s=t.target;e(s instanceof HTMLButtonElement,"app/assets/modules/github/gist/share.js:10"),r.query(n,"#gist-share-url",HTMLInputElement).value=s.value}),l.remoteForm(".js-gist-file-update-container .js-comment-update",function(){var e=g(regeneratorRuntime.mark(function e(t,n){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=void 0,e.prev=1,e.next=4,n.json();case 4:s=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return");case 10:t.action=s.json.url,s.json.authenticity_token&&(r.query(t,"input[name=authenticity_token]",HTMLInputElement).value=s.json.authenticity_token);case 12:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t,r){return e.apply(this,arguments)}}());var M=function(){var t=g(regeneratorRuntime.mark(function t(n){var s,a,o,u,c,l,d,f,v;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.target,e(s instanceof HTMLInputElement,"app/assets/modules/github/gist/quicksearch.js:80"),a=s.value.replace(/^\s+|\s+$/g,""),o=r.closest(s,"form"),u=r.query(o,".js-quicksearch-results"),c=u.getAttribute("data-quicksearch-url"),e(c,"app/assets/modules/github/gist/quicksearch.js:85"),l=void 0,a.length?(d=new URL(c,window.location.origin),(f=new URLSearchParams(d.search.slice(1))).append("q",a),d.search=f.toString(),o.classList.add("is-sending"),l=i.fetchText(d)):l=Promise.resolve(""),v=void 0,t.prev=10,t.next=13,H.push(l);case 13:v=t.sent;case 14:return t.prev=14,v&&(u.innerHTML=v),u.classList.toggle("active",""!==a),o.classList.remove("is-sending"),t.finish(14);case 19:case"end":return t.stop()}},t,this,[[10,,14,19]])}));return function(e){return t.apply(this,arguments)}}(),H=new f;c.onFocus(".js-quicksearch-field",function(t){e(t instanceof HTMLInputElement,"app/assets/modules/github/gist/quicksearch.js:50"),e(t.form,"app/assets/modules/github/gist/quicksearch.js:51"),d.push(r.query(t.form,".js-quicksearch-results"))}),c.onInput(".js-quicksearch-field",M),u.on("navigation:keydown",".js-quicksearch-results",function(t){e(t instanceof CustomEvent,"app/assets/modules/github/gist/quicksearch.js:65");var n=t.target,s=r.closest(n,"form",HTMLFormElement);if("Escape"===t.detail.hotkey){var i=r.query(s,".js-quicksearch-results");i.classList.remove("active"),d.clear(i)}else"Enter"!==t.detail.hotkey||n.classList.contains("js-navigation-item")||(a.submit(s),t.preventDefault())}),u.on("submit",".js-quicksearch-form",function(t){e(t.currentTarget instanceof HTMLFormElement,"app/assets/modules/github/gist/quicksearch.js:56");var r=t.currentTarget.querySelector(".js-quicksearch-results");r&&(r.classList.remove("active"),d.pop(r))}),u.on("focusout:delay",".js-quicksearch-field",function(e){var t=r.closest(e.currentTarget,"form",HTMLFormElement).querySelector(".js-quicksearch-results");t&&(t.classList.remove("active"),d.pop(t))})});

//# sourceMappingURL=gist-06419e1d34d16c1e8e43099dbfc8c972.js.map
